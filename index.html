<!DOCTYPE html>
<html>

<head>
    <script src="nnindex.js"></script>
</head>

<body>
    <div id="result1"></div>
    <p>--------------------</p>
    <div id="result2"></div>
    <p>--------------------</p>

    <script id="template" type="text/squirrelly">
        <div>
            {{A|reverse}} {{B|reverse}} {{C|reverse}} {{D|reverse}} {{E|reverse}}
        </div>
    </script>
    <script>
        var source2 =
            "Yo this is hola its a pretty cool thing so Ill say {{whassup|escaped}} and {{hi}} and everything and it will be so cool and awesome and Ill say {{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}Yo this is hola its a pretty cool thing so Ill say {{whassup}} and {{hi}} and everything and it will be so cool and awesome and Ill say {{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}Yo this is hola its a pretty cool thing so Ill say {{whassup}} and {{hi}} and everything and it will be so cool and awesome and Ill say {{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}Yo this is hola its a pretty cool thing so Ill say {{whassup}} and {{hi}} and everything and it will be so cool and awesome and Ill say {{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}Yo this is hola its a pretty cool thing so Ill say {{whassup}} and {{hi}} and everything and it will be so cool and awesome and Ill say {{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}Yo this is hola its a pretty cool thing so Ill say {{whassup}} and {{hi}} and everything and it will be so cool and awesome and Ill say {{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}Yo this is hola its a pretty cool thing so Ill say {{whassup}} and {{hi}} and everything and it will be so cool and awesome and Ill say {{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}{{whassup}}"
        var source = document.getElementById("template").innerHTML
        //var template = Sqrl.Precompile("{{hello}}       {{array}}{{!--this is a comment--}}")
        comp1()
        //comp2()

        function comp1() {
            console.time("comp1")
            let newtemplate = Sqrl.Precompile(source)
            console.timeEnd("comp1")
            let result = Sqrl.Render(newtemplate, {
                A: "HI"
            })
            document.getElementById("result1").innerHTML = result
            console.log("Function returned by comp1: ")
            console.log(newtemplate.toString())
        }

        function comp2() {
            console.time("comp2")
            let newtemplate2 = Sqrl.Precompile(source2)
            let result = Sqrl.Render(newtemplate2, {
                whassup: "<p>whassup</p>",
                hi: "hola"
            })
            console.timeEnd("comp2")
            document.getElementById("result2").innerHTML = result
            console.log("Function returned by comp2: ")
            console.log(newtemplate2.toString())

        }
    </script>
    <button onclick="comp1()">Compile</button>
    <button onclick="comp2()">Compile 2nd</button>
    <textarea oninput="comp()" id="input" style="width: 200px; height: 200px;">he{{ If(usercount === 3) 1}}

        d
        do
        {{/If 1}}</textarea>
    <div id="output"></div>
    <script>
        function comp() {
            console.time("comp")
            let newtemplatefunction = Sqrl.Precompile(document.getElementById("input").value)
            /*let result = newtemplate2({
                whassup: "what'sup",
                hi: "hola"
            })*/
            console.timeEnd("comp")
            document.getElementById("output").innerHTML = newtemplatefunction
            console.log("Function returned by comp2: ")
            console.log(newtemplatefunction.toString())

        }
        comp()
    </script>
</body>

</html>