!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],function(){return e.Sqrl=t()}):"object"==typeof module&&module.exports?module.exports=t(require("fs")):e.Sqrl=t()}("undefined"!=typeof self?self:this,function(t){var F={Compiler:{},Helpers:{Date:function(e,t,n,r){var l=new Date,i=l.getDate(),a=l.getMonth()+1;return i<10&&(i="0"+i),a<10&&(a="0"+a),l=a+"/"+i+"/"+l.getFullYear()}},Partials:{},Layouts:{},registerLayout:function(e,t){},defineHelper:function(e,t){F.Helpers[e]=t,F.H=F.Helpers},Render:function(e,t){return"function"==typeof e?e(t,F):"string"==typeof e?F.Precompile(e)(t,F):void 0},defaultFilters:{e:!1},autoEscape:function(e){F.defaultFilters.e=!!e},escMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},F:{d:function(e){return e},e:function(e){var t=String(e);return/[&<>"'`=\/]/.test(t)?t.replace(/[&<>"'`=\/]/g,function(e){return F.escMap[e]}):t}},defineFilter:function(e,t){F.F[e]=t,F.Filters=F.F}};return F.H=F.Helpers,F.P=F.Partials,F.F.escape=F.F.e,F.Filters=F.F,F.nativeHelpers={if:{helperStart:function(e){return"if("+e+"){"},helperEnd:function(){return"}"},blocks:{else:function(){return"}else{"}}},each:{helperStart:function(e){return"for(var i=0;i<"+(F.nativeHelpers.each.params=e)+".length; i++){tmpltRes+=(function(hvals){var tmpltRes='';"},helperEnd:function(){return"return tmpltRes})({this:"+F.nativeHelpers.each.param+"[i],index:i})};"}},foreach:{helperStart:function(e){return"for(var key in "+(F.nativeHelpers.foreach.param=e)+"){if(!"+e+".hasOwnProperty(key)) continue;tmpltRes+=(function(hvals){var tmpltRes='';"},helperEnd:function(){return"return tmpltRes})({this:"+F.nativeHelpers.foreach.param+"[key], key: key})};"}},log:function(e,t,n,r,l){return"console.log("+e+");"}},F.Precompile=function(e){for(var t,n,r=/{{ *?(?:(?:(?:(?:([a-zA-Z_$]+[\w]* *?(?:[^\s\w\($]+[^\n]*)*))|(?:@(?:([\w$]+:|(?:\.\.\/)+))? *(.+?) *))(?: *?(\| *?[^\n]+? *?)*?)?)|(?:([a-zA-Z_$]+[\w]*) *?\(([^\n]*)\) *?([A-Za-z$_]*[\w]*))|(?:\/ *?([a-zA-Z_$]+[\w]*))|(?:# *?([a-zA-Z_$]+[\w]*))|(?:([^]+?))) *?}}/g,l=/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[\\]@(?:[\w$]*:)?[\w$]+|@(?:([\w$]*):)?([\w$]+)/g,i=0,a="",s=[],o=-1,u=0,c={};null!==(m=r.exec(e));){if(m.index===r.lastIndex&&r.lastIndex++,""===a?a+="var tmpltRes='"+e.slice(i,m.index).replace(/'/g,"\\'")+"';":i!==m.index&&(a+="tmpltRes+='"+e.slice(i,m.index).replace(/'/g,"\\'")+"';"),i=m[0].length+m.index,m[1])a+="tmpltRes+="+(t=m[1],n=m[4],R("options."+t,n))+";";else if(m[3])a+="tmpltRes+="+y(m[3],m[2],m[4])+";";else if(m[5]){var p=m[7];""!==p&&null!==p||(p=u,u++);var f=!1;F.nativeHelpers.hasOwnProperty(m[5])&&(f=!0),o+=1;var v={name:m[5],id:p,native:f},d=m[6]||"";if(d=d.replace(l,function(e,t,n){return void 0===n?e:(void 0===t&&(t=""),"hvals"+t+"."+n)}),s[o]=v,f)a+=F.nativeHelpers[m[5]].helperStart(d,p);else d="["+d+"]",a+="tmpltRes+=Sqrl.H."+m[5]+"("+d+",function(hvals){var hvals"+p+"=hvals;"}else if(m[8]){var h=s[o];h&&h.name===m[8]?(o-=1,!0===h.native?a+=F.nativeHelpers[h.name].helperEnd(h.id):c[h.id]?a+="return blockRes}});":a+="return blockRes});"):console.error("Sorry, it doesn't appear that your closing helper tag matches your opening one.")}else if(m[9]){var g=s[o];if(g.native){var k=F.nativeHelpers[g.name];k.blocks&&k.blocks[m[9]]?a+=k.blocks[m[9]](g.id):console.warn("Oops, looks like that native helper isn't configured to accept that block.")}else c[g.id]?a+="return blockRes},"+m[9]+":function(hvals){var hvals"+g.id+"=hvals;var blockRes='';":(a+="return blockRes}, {"+m[9]+":function(hvals){var hvals"+g.id+"=hvals;var blockRes='';",c[g.id]=!0)}else m[10]||console.error("Err: Code 000");function y(e,t,n){return R(void 0!==t?"hvals"+(/(?:\.\.\/)+/g.test(t)?s[o-t.length/3].id:t.slice(0,-1))+"."+e:"hvals."+e,n)}function R(e,t){var n;if(null!=t){n=t.split("|");for(var r=0;r<n.length;r++)n[r]=n[r].trim(),""!==n[r]&&"unescape"!==n[r]&&"u"!==n[r]&&(!F.defaultFilters.e||"e"!==n[r]&&"escape"!==n[r])&&(e="Sqrl.F."+n[r]+"("+e+")")}for(key in F.defaultFilters)if(!0===F.defaultFilters[key]){if(void 0!==n&&(n.includes("u")||n.includes("unescape"))&&("e"===key||"escape"===key))continue;e="Sqrl.F."+key+"("+e+")"}return e}}return e.length>r.lastIndex&&(""===a?a+="var tmpltRes='"+e.slice(i,e.length).replace(/'/g,"\\'")+"';":i!==e.length&&(a+="tmpltRes+='"+e.slice(i,e.length).replace(/'/g,"\\'")+"';")),a+="return tmpltRes",new Function("options","Sqrl",a.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))},null!=t&&(F.__express=function(e,i,a){t.readFile(e,function(e,t){if(e)return a(e);var n=t.toString(),r=F.Precompile(n),l=F.Render(r,i);return a(null,l)})}),F});