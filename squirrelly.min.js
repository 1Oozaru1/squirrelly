!function(e,r){"use strict";"function"==typeof define&&define.amd?define([],function(){return e.Sqrl=r()}):"object"==typeof module&&module.exports?module.exports=r(require("fs")):e.Sqrl=r()}("undefined"!=typeof self?self:this,function(r){var x={Utils:{},Compiler:{}};return x.Helpers={Date:function(e,r,t,n){var l=new Date,i=l.getDate(),a=l.getMonth()+1;return i<10&&(i="0"+i),a<10&&(a="0"+a),l=a+"/"+i+"/"+l.getFullYear()}},x.H=x.Helpers,x.Partials={},x.P=x.Partials,x.Layouts={},x.registerLayout=function(e,r){},x.registerHelper=function(e,r){x.Helpers[e]=r,x.H=x.Helpers},x.Str=function(e){return"string"==typeof e?e:"object"==typeof e?JSON.stringify(e):e.toString()},x.Render=function(e,r){return e(r,x)},x.defaultFilters={e:!1},x.autoEscape=function(e){x.defaultFilters.e=!!e},x.escMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},x.F={d:function(e){return e},e:function(e){var r=String(e);return/[&<>"'`=\/]/.test(r)?r.replace(/[&<>"'`=\/]/g,function(e){return x.escMap[e]}):r}},x.F.escape=x.F.e,x.Filters=x.F,x.registerFilter=function(e,r){x.F[e]=r,x.Filters=x.F},x.builtInHelpers={if:function(e,r,t,n,l,i){var a="if (typeof helpervals === 'undefined') helpervals = {}; if("+e+"){"+t+"+="+r.default+"(helpervals)}";return r.hasOwnProperty("else")&&(a+="else { "+t+"+="+r.else+"(helpervals)}"),a},each:function(e,r,t,n,l,i){return"for (var i = 0; i < "+e+".length ;i++) {"+t+"+="+r.default+"({this: "+e+"[i], index: i})}"},foreach:function(e,r,t,n,l,i){return"for (var key in "+e+") {if (!"+e+".hasOwnProperty(key)) continue;"+t+"+="+r.default+"({this: "+e+"[key], key: key})}"},log:function(e,r,t,n,l,i){return"console.log("+e+");"}},x.Precompile=function(e){for(var r,t,n=/{{ *?(?:(?:(?:(?:([a-zA-Z_$]+[\w]* *?(?:[^\s\w\($]+[^\n]*)*))|(?:@(?:([\w$]+:|(?:\.\.\/)+))? *(.+?) *))(?: *?(\| *?[^\n]+ *?)*)*)|(?:([a-zA-Z_$]+[\w]*) *?\(([^\n]*)\) *?([A-Za-z$_]*[\w]*))|(?:\/ *?([a-zA-Z_$]+[\w]*))|(?:# *?([a-zA-Z_$]+[\w]*))|(?:([^]+?))) *?}}/g,l=/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[\\]@(?:[\w$]*:)?[\w$]+|@(?:([\w$]*):)?([\w$]+)/g,i=0,a="",s=[],o=-1,u=0,f=["tmpltRes"],c=0,p={};null!==(m=n.exec(e));){if(m.index===n.lastIndex&&regex.lastIndex++,varName=f[c],""===a?a+="var tmpltRes='"+e.slice(i,m.index).replace(/'/g,"\\'")+"';":i!==m.index&&(a+=varName+"+='"+e.slice(i,m.index).replace(/'/g,"\\'")+"';"),i=m[0].length+m.index,m[1])a+=varName+"+="+(r=m[1],t=m[4],function(e,r){var t;if(null!=r){t=r.split("|");for(var n=0;n<t.length;n++)t[n]=t[n].trim(),""!==t[n]&&"unescape"!==t[n]&&"u"!==t[n]&&(!x.defaultFilters.e||"e"!==t[n]&&"escape"!==t[n])&&(e="Sqrl.F."+t[n]+"("+e+")")}for(key in x.defaultFilters)if(!0===x.defaultFilters[key]){if(void 0!==t&&(t.includes("u")||t.includes("unescape"))&&("e"===key||"escape"===key))continue;e="Sqrl.F."+key+"("+e+")"}return e}("options."+r,t))+";";else if(m[3])a+=varName+"+="+F(m[3],m[2],m[4])+";";else if(m[5]){var d=m[7];""!==d&&null!==d||(d=u,u++),o+=1;var v={name:m[5],parameters:m[6],id:d},g=m[6]||"";g="["+g.replace(l,function(e,r,t){return void 0===t?e:(void 0===r&&(r=""),"helpervals"+r+"."+t)})+"]",s[o]=v,a+=varName+"+=Sqrl.H."+m[5]+"("+g+",function(hvals){var hvals"+d+'=hvals;var blockRes="";',f[c+=1]="blockRes"}else if(m[8]){var h=s[o];h&&h===m[4]&&(o-=1)}else if(m[9]){var y=s[o].id;console.log("parentId: "+y),p[y]=!0}else m[10]||console.error("Err: Code 000");function F(e,r,t){var n;return void 0!==r&&(n=/(?:\.\.\/)+/g.test(r)?s[o-r.length/3].id:r.slice(0,-1),console.log("prefix: "+n)),"'"+e+"'"}}return e.length>n.lastIndex&&(a+="tmpltRes+='"+e.slice(i,e.length).replace(/'/g,"\\'")+"';"),a+="return tmpltRes",new Function("options","Sqrl",a.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))},null!=r&&(x.__express=function(e,i,a){r.readFile(e,function(e,r){if(e)return a(e);var t=r.toString(),n=x.Precompile(t),l=x.Render(n,i);return a(null,l)})}),x});