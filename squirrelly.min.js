!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],function(){return e.Sqrl=t()}):"object"==typeof module&&module.exports?module.exports=t(require("fs")):e.Sqrl=t()}("undefined"!=typeof self?self:this,function(t){var F={Compiler:{},Helpers:{Date:function(e,t,n,r){var l=new Date,i=l.getDate(),s=l.getMonth()+1;return i<10&&(i="0"+i),s<10&&(s="0"+s),l=s+"/"+i+"/"+l.getFullYear()}},Partials:{},Layouts:{},registerLayout:function(e,t){},defineHelper:function(e,t){F.Helpers[e]=t,F.H=F.Helpers},Render:function(e,t){return"function"==typeof e?e(t,F):"string"==typeof e?F.Precompile(e)(t,F):void 0},defaultFilters:{e:!1},autoEscape:function(e){F.defaultFilters.e=!!e},escMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},F:{d:function(e){return e},e:function(e){var t=String(e);return/[&<>"'`=\/]/.test(t)?t.replace(/[&<>"'`=\/]/g,function(e){return F.escMap[e]}):t}},defineFilter:function(e,t){F.F[e]=t,F.Filters=F.F}};return F.H=F.Helpers,F.P=F.Partials,F.F.escape=F.F.e,F.Filters=F.F,F.nativeHelpers={if:{helperStart:function(e){return"if("+e+"){"},helperEnd:function(){return"}"},blocks:{else:function(){return"}else{"}}},each:{helperStart:function(e){return"for(var i=0;i<"+e+".length; i++){tmpltRes+=(function(hvals){var tmpltRes='';"},helperEnd:function(e){return"return tmpltRes})({this:"+e+"[i],index:i})};"}},foreach:{helperStart:function(e){return"for(var key in "+e+"){if(!"+e+".hasOwnProperty(key)) continue;tmpltRes+=(function(hvals){var tmpltRes='';"},helperEnd:function(e){return"return tmpltRes})({this:"+e+"[key], key: key})};"}},log:{helperStart:function(e){return"console.log("+e+");"},helperEnd:function(){return""}}},F.Precompile=function(e){for(var t,n,r=/{{ *?(?:(?:(?:(?:([a-zA-Z_$]+[\w]* *?(?:[^\s\w\($]+[^\n]*)*))|(?:@(?:([\w$]+:|(?:\.\.\/)+))? *(.+?) *))(?: *?(\| *?[^\n]+? *?)*?)?)|(?:([a-zA-Z_$]+[\w]*) *?\(([^\n]*)\) *?([A-Za-z$_]*[\w]*))|(?:\/ *?([a-zA-Z_$]+[\w]*))|(?:# *?([a-zA-Z_$]+[\w]*))|(?:([^]+?))) *?}}/g,l=/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[\\]@(?:[\w$]*:)?[\w$]+|@(?:([\w$]*):)?([\w$]+)/g,i=0,s="",a=[],o=-1,u=0,c={};null!==(m=r.exec(e));){if(m.index===r.lastIndex&&r.lastIndex++,""===s?s+="var tmpltRes='"+e.slice(i,m.index).replace(/'/g,"\\'")+"';":i!==m.index&&(s+="tmpltRes+='"+e.slice(i,m.index).replace(/'/g,"\\'")+"';"),i=m[0].length+m.index,m[1])s+="tmpltRes+="+(t=m[1],n=m[4],R("options."+t,n))+";";else if(m[3])s+="tmpltRes+="+y(m[3],m[2],m[4])+";";else if(m[5]){var p=m[7];""!==p&&null!==p||(p=u,u++);var f=!1;F.nativeHelpers.hasOwnProperty(m[5])&&(f=!0),o+=1;var d=m[6]||"";d=d.replace(l,function(e,t,n){return void 0===n?e:(void 0===t&&(t=""),"hvals"+t+"."+n)}),f||(d="["+d+"]");var v={name:m[5],id:p,params:d,native:f};if(a[o]=v,f)s+=F.nativeHelpers[m[5]].helperStart(d,p);else s+="tmpltRes+=Sqrl.H."+m[5]+"("+d+",function(hvals){var hvals"+p+"=hvals;"}else if(m[8]){var h=a[o];h&&h.name===m[8]?(o-=1,!0===h.native?s+=F.nativeHelpers[h.name].helperEnd(h.params,h.id):c[h.id]?s+="return blockRes}});":s+="return blockRes});"):console.error("Sorry, it doesn't appear that your closing helper tag matches your opening one.")}else if(m[9]){var g=a[o];if(g.native){var k=F.nativeHelpers[g.name];k.blocks&&k.blocks[m[9]]?s+=k.blocks[m[9]](g.id):console.warn("Oops, looks like that native helper isn't configured to accept that block.")}else c[g.id]?s+="return blockRes},"+m[9]+":function(hvals){var hvals"+g.id+"=hvals;var blockRes='';":(s+="return blockRes}, {"+m[9]+":function(hvals){var hvals"+g.id+"=hvals;var blockRes='';",c[g.id]=!0)}else m[10]||console.error("Err: Code 000");function y(e,t,n){return R(void 0!==t?"hvals"+(/(?:\.\.\/)+/g.test(t)?a[o-t.length/3].id:t.slice(0,-1))+"."+e:"hvals."+e,n)}function R(e,t){var n;if(null!=t){n=t.split("|");for(var r=0;r<n.length;r++)n[r]=n[r].trim(),""!==n[r]&&"unescape"!==n[r]&&"u"!==n[r]&&(!F.defaultFilters.e||"e"!==n[r]&&"escape"!==n[r])&&(e="Sqrl.F."+n[r]+"("+e+")")}for(key in F.defaultFilters)if(!0===F.defaultFilters[key]){if(void 0!==n&&(n.includes("u")||n.includes("unescape"))&&("e"===key||"escape"===key))continue;e="Sqrl.F."+key+"("+e+")"}return e}}return e.length>r.lastIndex&&(""===s?s+="var tmpltRes='"+e.slice(i,e.length).replace(/'/g,"\\'")+"';":i!==e.length&&(s+="tmpltRes+='"+e.slice(i,e.length).replace(/'/g,"\\'")+"';")),s+="return tmpltRes",new Function("options","Sqrl",s.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))},null!=t&&(F.__express=function(e,i,s){t.readFile(e,function(e,t){if(e)return s(e);var n=t.toString(),r=F.Precompile(n),l=F.Render(r,i);return s(null,l)})}),F});