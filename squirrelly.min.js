!function(e,r){"use strict";"function"==typeof define&&define.amd?define([],function(){return e.Sqrl=r()}):"object"==typeof module&&module.exports?module.exports=r(require("fs")):e.Sqrl=r()}("undefined"!=typeof self?self:this,function(r){var R={Compiler:{},Helpers:{Date:function(e,r,n,t){var a=new Date,l=a.getDate(),i=a.getMonth()+1;return l<10&&(l="0"+l),i<10&&(i="0"+i),a=i+"/"+l+"/"+a.getFullYear()}},Partials:{},Layouts:{},registerLayout:function(e,r){},defineHelper:function(e,r){R.Helpers[e]=r,R.H=R.Helpers},Render:function(e,r){return"function"==typeof e?e(r,R):"string"==typeof e?R.Precompile(e)(r,R):void 0},defaultFilters:{e:!1},autoEscape:function(e){R.defaultFilters.e=!!e},escMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"}};return R.H=R.Helpers,R.P=R.Partials,R.F={d:function(e){return e},e:function(e){var r=String(e);return/[&<>"'`=\/]/.test(r)?r.replace(/[&<>"'`=\/]/g,function(e){return R.escMap[e]}):r}},R.F.escape=R.F.e,R.Filters=R.F,R.defineFilter=function(e,r){R.F[e]=r,R.Filters=R.F},R.nativeHelpers={if:{helperStart:function(e,r){return R.nativeHelpers.if.namespace.mostRecentVarName=e,console.log("most recent varname: "+e),"if("},afterParams:function(e,r){return") {"+e+"+=("},helperEnd:function(e,r){return")()}"},namespace:{},blocks:{else:function(e,r){return")()} else {"+R.nativeHelpers.if.namespace.mostRecentVarName+"+=("}}},each:function(e,r,n,t,a,l){return"for (var i = 0; i < "+e+".length ;i++) {"+n+"+="+r.default+"({this: "+e+"[i], index: i})}"},foreach:function(e,r,n,t,a,l){return"for (var key in "+e+") {if (!"+e+".hasOwnProperty(key)) continue;"+n+"+="+r.default+"({this: "+e+"[key], key: key})}"},log:function(e,r,n,t,a,l){return"console.log("+e+");"}},R.Precompile=function(e){for(var r,n,t=/{{ *?(?:(?:(?:(?:([a-zA-Z_$]+[\w]* *?(?:[^\s\w\($]+[^\n]*)*))|(?:@(?:([\w$]+:|(?:\.\.\/)+))? *(.+?) *))(?: *?(\| *?[^\n]+ *?)*)*)|(?:([a-zA-Z_$]+[\w]*) *?\(([^\n]*)\) *?([A-Za-z$_]*[\w]*))|(?:\/ *?([a-zA-Z_$]+[\w]*))|(?:# *?([a-zA-Z_$]+[\w]*))|(?:([^]+?))) *?}}/g,a=/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[\\]@(?:[\w$]*:)?[\w$]+|@(?:([\w$]*):)?([\w$]+)/g,l=0,i="",s=[],o=-1,c=0,u={};null!==(m=t.exec(e));){if(m.index===t.lastIndex&&regex.lastIndex++,varName=o<0?"tmpltRes":"blockRes",""===i?i+="var tmpltRes='"+e.slice(l,m.index).replace(/'/g,"\\'")+"';":l!==m.index&&(i+=varName+"+='"+e.slice(l,m.index).replace(/'/g,"\\'")+"';"),l=m[0].length+m.index,m[1])i+=varName+"+="+(r=m[1],n=m[4],function(e,r){var n;if(null!=r){n=r.split("|");for(var t=0;t<n.length;t++)n[t]=n[t].trim(),""!==n[t]&&"unescape"!==n[t]&&"u"!==n[t]&&(!R.defaultFilters.e||"e"!==n[t]&&"escape"!==n[t])&&(e="Sqrl.F."+n[t]+"("+e+")")}for(key in R.defaultFilters)if(!0===R.defaultFilters[key]){if(void 0!==n&&(n.includes("u")||n.includes("unescape"))&&("e"===key||"escape"===key))continue;e="Sqrl.F."+key+"("+e+")"}return e}("options."+r,n))+";";else if(m[3])i+=varName+"+="+F(m[3],m[2],m[4])+";";else if(m[5]){var f=m[7];""!==f&&null!==f||(f=c,c++);var v=!1;console.log(JSON.stringify(R.nativeHelpers)),R.nativeHelpers.hasOwnProperty(m[5])&&(console.log("native"),v=!0),o+=1;var p={name:m[5],id:f,native:v},d=m[6]||"";if(d=d.replace(a,function(e,r,n){return void 0===n?e:(void 0===r&&(r=""),"helpervals"+r+"."+n)}),v||(d="["+d+"]"),s[o]=p,v){var h=R.nativeHelpers[m[5]];i+=h.helperStart(varName,f)+d+h.afterParams(varName,f)+"function(hvals){var hvals"+f+'=hvals;var blockRes="";'}else i+=varName+"+=Sqrl.H."+m[5]+"("+d+",function(hvals){var hvals"+f+"=hvals;"}else if(m[8]){var g=s[o];g&&g.name===m[8]?(o-=1,!0===g.native?i+="return blockRes}"+R.nativeHelpers[g.name].helperEnd(varName,g.id):u[g.id]?i+="return blockRes}});":i+="return blockRes});"):console.error("Sorry, it doesn't appear that your closing helper tag matches your opening one.")}else if(m[9]){var k=s[o];if(k.native){var y=R.nativeHelpers[k.name];y.blocks&&y.blocks[m[9]]?i+="return blockRes}"+y.blocks[m[9]](varName,k.id)+"function(hvals){var hvals"+f+"=hvals;var blockRes='';":console.warn("Oops, looks like that native helper isn't configured to accept that block.")}else u[k.id]?i+="return blockRes},"+m[9]+":function(hvals){var hvals"+k.id+"=hvals;var blockRes='';":(i+="return blockRes}, {"+m[9]+":function(hvals){var hvals"+k.id+"=hvals;var blockRes='';",u[k.id]=!0)}else m[10]||console.error("Err: Code 000");function F(e,r,n){return void 0!==r&&(/(?:\.\.\/)+/g.test(r)?s[o-r.length/3].id:r.slice(0,-1)),"'"+e+"'"}}return e.length>t.lastIndex&&(""===i?i+="var tmpltRes='"+e.slice(l,e.length).replace(/'/g,"\\'")+"';":l!==e.length&&(i+="tmpltRes+='"+e.slice(l,e.length).replace(/'/g,"\\'")+"';")),i+="return tmpltRes",new Function("options","Sqrl",i.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))},null!=r&&(R.__express=function(e,l,i){r.readFile(e,function(e,r){if(e)return i(e);var n=r.toString(),t=R.Precompile(n),a=R.Render(t,l);return i(null,a)})}),R});