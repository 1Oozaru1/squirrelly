(function(f,p){"function"===typeof define&&define.amd?define([],function(){return f.Sqrl=p()}):"object"===typeof module&&module.exports?module.exports=p(require("fs")):f.Sqrl=p()})("undefined"!==typeof self?self:this,function(f){function p(a,d,b){b=b||c.Compiler.RegExps;var e="var "+d+'\x3d"";',g=a.replace(b.comment,""),m=0;g.replace(b.helper,function(a,k,l,w,f,q,r,u,t){function h(a,b,d){return"function (helpervals) {"+("var helpervals"+b+"\x3dhelpervals;"+p(d||"","block"+a+b)+"}")}k=k||"";l=l||"";
var n=f||"";f=q||"";r=r||"";e=v(g.slice(m,t),d,e,b);m=t+a.length;q=k+n;l=l.replace(b.parameterGlobalRef,"options.").replace(b.parameterHelperRef,function(a,b,d){if("undefined"===typeof d)return a;"undefined"===typeof b&&(b="");return"helpervals"+b+"."+d});c.builtInHelpers.hasOwnProperty(k)?(blockFunctions={},blockFunctions.default=h("default",n,f),r.replace(b.helperBlock,function(a,b,d){console.log("name: "+b+", id: "+n+", content: "+d);a=h(b,n,d).replace(/\n/g,"\\n").replace(/\r/g,"\\r");console.log("createBlockFunctionResult: "+
a);blockFunctions[b]=a;blockFunctions.hey="hi";console.log("blockFunctions 169: "+JSON.stringify(blockFunctions));console.log("blockFunctions[mp1] 169: "+blockFunctions[b])}),console.log("blockFunctions: "+JSON.stringify(blockFunctions)),e+=c.builtInHelpers[k](l,blockFunctions,d,b)):(e+="var "+q+'\x3d{name: "'+k+'", id: "'+n+'", args: [',e+=l+"], blocks: {",e+="default :"+h("default",n,f),r.replace(b.helperBlock,function(a,b,d){e+=","+b+":"+h(b,n,d)}),e+="}};",e+=d+"+\x3dSqrl.H."+k+"("+q+".args, "+
q+".blocks.default, "+q+".blocks, options);");m=t+a.length});g.length>m&&(e=v(g.slice(m,g.length),d,e,b));return e+="return "+d}function v(a,d,b,e){var g=0;a.replace(e.globalRef,function(f,h,k,l){l>g&&(b=u(a.slice(g,l),d,b,e));if(""!==h){h="Sqrl.F.d(options."+h+')||""';for(key in c.defaultFilters)!0===c.defaultFilters[key]&&(h="Sqrl.F."+key+"("+h+")");if("undefined"!==typeof k&&null!==k){k=k.split("|");for(var m=1;m<k.length;m++)h="Sqrl.F."+k[m]+"("+h+")"}b+=d+"+\x3d"+h+";"}g=l+f.length});a.length>
g&&(b=u(a.slice(g,a.length),d,b,e));return b}function u(a,d,b,c){var e=0;a.replace(c.helperRef,function(c,h,k,g,f){f>e&&(g=a.slice(e,f).replace(/"/g,'\\"'),""!==g&&(b+=d+'+\x3d"'+g+'";'));b=void 0!==h&&h?b+(d+"+\x3dhelpervals"+h+"."+k+";"):b+(d+"+\x3dhelpervals."+k+";");e=f+c.length});a.length>e&&(c=a.slice(e,a.length).replace(/"/g,'\\"'),""!==c&&(b+=d+'+\x3d"'+c+'";'));return b}var c={Utils:{},Compiler:{},Helpers:{If:function(a,d,b,c){return a[0]?d():b.else?b.else()||"":""}}};c.H=c.Helpers;c.Partials=
{};c.P=c.Partials;c.Layouts={};c.registerLayout=function(a,d){};c.registerHelper=function(a,d){c.Helpers[a]=d;c.H=c.Helpers};c.Str=function(a){return"string"===typeof a?a:"object"===typeof a?JSON.stringify(a):a.toString()};c.Render=function(a,d){return a(d,c)};c.defaultFilters={e:!1};c.autoEscape=function(a){c.defaultFilters.e=a?!0:!1};c.Filters={d:function(a){return a},e:function(a){return String(a).replace("\x26","\x26amp;").replace("\x3c","\x26lt;").replace("\x3e","\x26gt;").replace('"',"\x26quot;").replace("'",
"\x26#39;").replace("/","\x26#x2F;").replace("`","\x26#x60;").replace("\x3d","\x26#x3D;")},reverse:function(a){for(var d="",b=a.length-1;0<=b;b--)d+=a.charAt(b);return d||a}};c.Filters.escape=c.Filters.e;c.F=c.Filters;c.builtInHelpers={if:function(a,d,b,c,g,f){console.log("param: "+a+", blocks: "+JSON.stringify(d)+", varName: "+b);a="if("+a+"){"+b+"+\x3d"+d.default+"()}";d.hasOwnProperty("else")&&(a+="else { "+b+"+\x3d"+d.else+"()}");console.log("returnFunc at if: "+a);return a},each:function(a,d,
b,c,g,f){}};c.Compiler.RegExps={helperRef:/{{\s*@(?:([\w$]*):)?\s*(.+?)\s*((?: *?\| *?[\w$]* *?)* *?\|*)}}/g,globalRef:/{{\s*?([^#@.\(\\/]+?(?:[.[].*?)*?)((?: *?\| *?[\w$]* *?)* *?\|*)}}/g,helper:/{{ *?([\w$]+) *?\(([^\n]*)\)((?: *?\| *?[\w$]* *?)* *?\|*) *?([\w$]*) *?}}([^]*?)((?:{{ *?# *?([\w$]*) *?}}[^]*{{ *?\/ *?\7 *?}}\s*)*){{ *?\/ *?\1 *? \4 *?}}/g,helperBlock:/{{ *?# *?(\w*) *?}}([^]*){{ *?\/ *?\1 *?}}(?:\s*{{!--[\w$\s]*--}}\s*)*/g,comment:/{{!--[^]*?--}}/g,parameterGlobalRef:/~~/g,parameterHelperRef:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[\\]@(?:[\w$]*:)?[\w$]+|@(?:([\w$]*):)?([\w$]+)/g,
partial:/{{ *?(?:>|include) *?([\w$]*)((?: *?\| *?[\w$]* *?)* *?\|*)}}/g};c.Compiler.SetTags=function(a,c){return{}};c.Precompile=function(a){a=p(a,"tRes");return new Function("options","Sqrl",a.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))};"undefined"!==typeof f&&null!==f&&(c.__express=function(a,d,b){f.readFile(a,function(a,f){if(a)return b(a);a=c.Compile(f.toString())(d);return b(null,a)})});return c});