(function(f,n){"function"===typeof define&&define.amd?define([],function(){return f.Sqrl=n()}):"object"===typeof module&&module.exports?module.exports=n(require("fs")):f.Sqrl=n()})("undefined"!==typeof self?self:this,function(f){function n(b,e,c){c=c||a.Compiler.RegExps;var d="var "+e+'\x3d"";',g=b.replace(c.comment,""),m=0;g.replace(c.helper,function(b,k,l,x,f,p,q,u,t){function h(b,c,a){return"function (helpervals) {"+("var helpervals"+c+"\x3dhelpervals;"+n(a||"","block"+b+c)+"}")}function w(b,a,
e){var d={};d.default=h("default",b,a);e.replace(c.helperBlock,function(c,a,e){c=h(a,b,e).replace(/\n/g,"\\n").replace(/\r/g,"\\r");d[a]=c});return d}k=k||"";l=l||"";var r=f||"";f=p||"";q=q||"";d=v(g.slice(m,t),e,d,c);m=t+b.length;p=k+r;l=l.replace(c.parameterGlobalRef,"options.").replace(c.parameterHelperRef,function(b,c,a){if("undefined"===typeof a)return b;"undefined"===typeof c&&(c="");return"helpervals"+c+"."+a});a.builtInHelpers.hasOwnProperty(k)?(q=w(r,f,q),d+=a.builtInHelpers[k](l,q,e,c)):
(d+="var "+p+'\x3d{name: "'+k+'", id: "'+r+'", args: [',d+=l+"], blocks: {",d+="default :"+h("default",r,f),q.replace(c.helperBlock,function(b,c,a){d+=","+c+":"+h(c,r,a)}),d+="}};",d+=e+"+\x3dSqrl.H."+k+"("+p+".args, "+p+".blocks.default, "+p+".blocks, options);");m=t+b.length});g.length>m&&(d=v(g.slice(m,g.length),e,d,c));return d+="return "+e}function v(b,e,c,d){var g=0;b.replace(d.globalRef,function(f,h,k,l){l>g&&(c=u(b.slice(g,l),e,c,d));if(""!==h){h="Sqrl.F.d(options."+h+')||""';for(key in a.defaultFilters)!0===
a.defaultFilters[key]&&(h="Sqrl.F."+key+"("+h+")");if("undefined"!==typeof k&&null!==k){k=k.split("|");for(var m=1;m<k.length;m++)h="Sqrl.F."+k[m]+"("+h+")"}c+=e+"+\x3d"+h+";"}g=l+f.length});b.length>g&&(c=u(b.slice(g,b.length),e,c,d));return c}function u(b,a,c,d){var e=0;b.replace(d.helperRef,function(d,h,k,g,f){f>e&&(g=b.slice(e,f).replace(/"/g,'\\"'),""!==g&&(c+=a+'+\x3d"'+g+'";'));c=void 0!==h&&h?c+(a+"+\x3dhelpervals"+h+"."+k+";"):c+(a+"+\x3dhelpervals."+k+";");e=f+d.length});b.length>e&&(d=
b.slice(e,b.length).replace(/"/g,'\\"'),""!==d&&(c+=a+'+\x3d"'+d+'";'));return c}var a={Utils:{},Compiler:{},Helpers:{}};a.H=a.Helpers;a.Partials={};a.P=a.Partials;a.Layouts={};a.registerLayout=function(b,a){};a.registerHelper=function(b,e){a.Helpers[b]=e;a.H=a.Helpers};a.Str=function(b){return"string"===typeof b?b:"object"===typeof b?JSON.stringify(b):b.toString()};a.Render=function(b,e){return b(e,a)};a.defaultFilters={e:!1};a.autoEscape=function(b){a.defaultFilters.e=b?!0:!1};a.Filters={d:function(b){return b},
e:function(b){return String(b).replace("\x26","\x26amp;").replace("\x3c","\x26lt;").replace("\x3e","\x26gt;").replace('"',"\x26quot;").replace("'","\x26#39;").replace("/","\x26#x2F;").replace("`","\x26#x60;").replace("\x3d","\x26#x3D;")},reverse:function(b){for(var a="",c=b.length-1;0<=c;c--)a+=b.charAt(c);return a||b}};a.Filters.escape=a.Filters.e;a.F=a.Filters;a.builtInHelpers={if:function(b,a,c,d,g,f){b="if("+b+"){"+c+"+\x3d"+a.default+"()}";a.hasOwnProperty("else")&&(b+="else { "+c+"+\x3d"+a.else+
"()}");return b},each:function(a,e,c,d,g,f){}};a.Compiler.RegExps={helperRef:/{{\s*@(?:([\w$]*):)?\s*(.+?)\s*((?: *?\| *?[\w$]* *?)* *?\|*)}}/g,globalRef:/{{\s*?([^#@.\(\\/]+?(?:[.[].*?)*?)((?: *?\| *?[\w$]* *?)* *?\|*)}}/g,helper:/{{ *?([\w$]+) *?\(([^\n]*)\)((?: *?\| *?[\w$]* *?)* *?\|*) *?([\w$]*) *?}}([^]*?)((?:{{ *?# *?([\w$]*) *?}}[^]*{{ *?\/ *?\7 *?}}\s*)*){{ *?\/ *?\1 *? \4 *?}}/g,helperBlock:/{{ *?# *?(\w*) *?}}([^]*){{ *?\/ *?\1 *?}}(?:\s*{{!--[\w$\s]*--}}\s*)*/g,comment:/{{!--[^]*?--}}/g,
parameterGlobalRef:/~~/g,parameterHelperRef:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[\\]@(?:[\w$]*:)?[\w$]+|@(?:([\w$]*):)?([\w$]+)/g,partial:/{{ *?(?:>|include) *?([\w$]*)((?: *?\| *?[\w$]* *?)* *?\|*)}}/g};a.Compiler.SetTags=function(a,e){return{}};a.Precompile=function(a){a=n(a,"tRes");return new Function("options","Sqrl",a.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))};"undefined"!==typeof f&&null!==f&&(a.__express=function(b,e,c){f.readFile(b,function(b,f){if(b)return c(b);b=a.Compile(f.toString())(e);
return c(null,b)})});return a});