!function(e,r){"use strict"
"function"==typeof define&&define.amd?define([],function(){return e.Sqrl=r()}):"object"==typeof module&&module.exports?module.exports=r(require("fs")):e.Sqrl=r()}("undefined"!=typeof self?self:this,function(e){var r={}
return r.Utils={},r.Compiler={},r.Helpers={Date:function(e,r,n,t){var l=new Date,i=l.getDate(),a=l.getMonth()+1,o=l.getFullYear()
return 10>i&&(i="0"+i),10>a&&(a="0"+a),l=a+"/"+i+"/"+o}},r.H=r.Helpers,r.Partials={},r.P=r.Partials,r.Layouts={},r.registerLayout=function(e,r){},r.registerHelper=function(e,n){r.Helpers[e]=n,r.H=r.Helpers},r.Str=function(e){return"string"==typeof e?e:"object"==typeof e?JSON.stringify(e):""+e},r.Render=function(e,n){return e(n,r)},r.defaultFilters={e:!1},r.autoEscape=function(e){e?r.defaultFilters.e=!0:r.defaultFilters.e=!1},r.escMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},r.F={d:function(e){return e},e:function(e){function n(e){return r.escMap[e]}var t=e+"",l=/[&<>"'`=\/]/.test(t)?t.replace(/[&<>"'`=\/]/g,n):t
return l}},r.F.escape=r.F.e,r.Filters=r.F,r.registerFilter=function(e,n){r.F[e]=n,r.Filters=r.F},r.builtInHelpers={"if":function(e,r,n,t,l,i){var a="if (typeof helpervals === 'undefined') helpervals = {}; if("+e+"){"+n+"+="+r["default"]+"(helpervals)}"
return r.hasOwnProperty("else")&&(a+="else { "+n+"+="+r["else"]+"(helpervals)}"),a},each:function(e,r,n,t,l,i){var a="for (var i = 0; i < "+e+".length ;i++) {"+n+"+="+r["default"]+"({this: "+e+"[i], index: i})}"
return a},foreach:function(e,r,n,t,l,i){var a="for (var key in "+e+") {if (!"+e+".hasOwnProperty(key)) continue;"+n+"+="+r["default"]+"({this: "+e+"[key], key: key})}"
return a},log:function(e,r,n,t,l,i){var a="console.log("+e+");"
return a}},r.Precompile=function(e){function n(e,r){return l("options."+e,r)}function t(e,r,n){var t
return void 0!==r&&(/(?:\.\.\/)+/g.test(r)?(t=u[f-r.length/3].id,console.log("prefix: "+t)):(t=r.slice(0,-1),console.log("prefix: "+t))),"'"+e+"'"}function l(e,n){var t
if(void 0!==n&&null!==n){t=n.split("|")
for(var l=0;l<t.length;l++)t[l]=t[l].trim(),""!==t[l]&&"unescape"!==t[l]&&"u"!==t[l]&&(!r.defaultFilters.e||"e"!==t[l]&&"escape"!==t[l])&&(e="Sqrl.F."+t[l]+"("+e+")")}for(key in r.defaultFilters)if(r.defaultFilters[key]===!0){if(void 0!==t&&(t.includes("u")||t.includes("unescape"))&&("e"===key||"escape"===key))continue
e="Sqrl.F."+key+"("+e+")"}return e}for(var i=/{{ *?(?:(?:(?:(?:([a-zA-Z_$]+[\w]* *?(?:[^\s\w\($]+[^\n]*)*))|(?:@(?:([\w$]+:|(?:\.\.\/)+))? *(.+?) *))(?: *?(\| *?[^\n]+ *?)*)*)|(?:([a-zA-Z_$]+[\w]*) *?\(([^\n]*)\) *?([A-Za-z$_]*[\w]*))|(?:\/ *?([a-zA-Z_$]+[\w]*))|(?:# *?([a-zA-Z_$]+[\w]*))|(?:([^]+?))) *?}}/g,a=/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[\\]@(?:[\w$]*:)?[\w$]+|@(?:([\w$]*):)?([\w$]+)/g,o=0,s="",u=[],f=-1,c=0,p=["tmpltRes"],d=0,v={};null!==(m=i.exec(e));)if(m.index===i.lastIndex&&regex.lastIndex++,varName=p[d],""===s?s+="var tmpltRes='"+e.slice(o,m.index).replace(/'/g,"\\'")+"';":o!==m.index&&(s+=varName+"+='"+e.slice(o,m.index).replace(/'/g,"\\'")+"';"),o=m[0].length+m.index,m[1])s+=varName+"+="+n(m[1],m[4])+";"
else if(m[3])s+=varName+"+="+t(m[3],m[2],m[4])+";"
else if(m[5]){var g=m[7];(""===g||null===g)&&(g=c,c++),f+=1
var h={name:m[5],parameters:m[6],id:g},y=m[6]||""
y="["+y.replace(a,function(e,r,n){return void 0===n?e:(void 0===r&&(r=""),"helpervals"+r+"."+n)})+"]",u[f]=h,s+=varName+"+=Sqrl.H."+m[5]+"("+y+",function(hvals){var hvals"+g+'=hvals;var blockRes="";',d+=1,p[d]="blockRes"}else if(m[8]){var F=u[f]
F&&F===m[4]&&(f-=1)}else if(m[9]){var x=u[f].id
console.log("parentId: "+x),v[x]=!0}else m[10]||console.error("Err: Code 000")
e.length>i.lastIndex&&(s+="tmpltRes+='"+e.slice(o,e.length).replace(/'/g,"\\'")+"';"),s+="return tmpltRes"
var w=Function("options","Sqrl",s.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))
return w},void 0!==e&&null!==e&&(r.__express=function(n,t,l){e.readFile(n,function(e,n){if(e)return l(e)
var i=""+n,a=r.Precompile(i),o=r.Render(a,t)
return l(null,o)})}),r})