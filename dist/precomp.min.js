(function(c,a){"function"===typeof define&&define.amd?define([],function(){return c.Sqrl=a()}):"object"===typeof module&&module.exports?module.exports=a(require("fs")):c.Sqrl=a()})("undefined"!==typeof self?self:this,function(c){var a={Utils:{},Compiler:{},Helpers:{},Partials:{},Layouts:{},Helper:function(e,h){a.Helpers[e]=h}};a.Utils.EscMap={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;","/":"\x26#x2F;","`":"\x26#x60;","\x3d":"\x26#x3D;"};a.Compiler.RegExps={helperRef:/{{\s*@(?:([\w$]*):)?\s*(.+?)\s*}}/g,
globalRef:/{{\s*?([^#@.\(\\/]+?(?:[.[].*?)*?)}}/g,helper:/{{ *?([\w$]+) *?\(([^\n]*)\) *?([\w$]*) *?}}([^]*?)((?:{{ *?# *?[\w$]* *?}}[^]*)*){{ *?\/ *?\1 *? \3 *?}}/g,helperBlock:/{{ *?# *?(\w*) *?}}([^]*){{ *?\/ *?\1 *?}}(?:\s*{{!--[\w$\s]*--}}\s*)*/g,comment:/{{!--\w*--}}/g,parameterGlobalRef:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|\d(?:\.)?\d*|[[.@]\w+|(\w+)/g,parameterHelperRef:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[\\]@(?:[\w$]*:)?[\w$]+|@(?:([\w$]*):)?([\w$]+)/g};a.Compiler.SetTags=function(a,h){};
a.Utils.EscapeHTML=function(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return escMap[a]})};a.Precompile=function(e){function h(a){for(var d=[],b=0;null!==(m=f.globalRef.exec(a));){var u=m[1];m.index>b&&d.push({kind:"nonGlobalRef",innerRefs:c(a.slice(b,m.index))});d.push({kind:"globalRef",content:u});b=f.globalRef.lastIndex}a.length>b&&d.push({kind:"nonGlobalRef",innerRefs:c(a.slice(b,a.length))});return d}function c(a){for(var d=[],b=0;null!==(m=f.helperRef.exec(a));){var c=m[2];m.index>
b&&d.push({kind:"string",value:a.slice(b,m.index)});d.push({kind:"helperRef",content:c,scope:void 0!==m[1]&&m[1]?m[1]:""});b=f.helperRef.lastIndex}a.length>b&&d.push({kind:"string",value:a.slice(b,a.length)});return d}var f=a.Compiler.RegExps;e=function(a){for(var d=[],b=0;null!==(m=f.helper.exec(a));){var c=m[1]||"",e=m[2]||"",k=m[3]||"",g=m[4]||"",l=m[5]||"";m.index>b&&d.push({kind:"nonhelper",innerRefs:h(a.slice(b,m.index))});d.push({kind:"helper",name:c,params:"["+e.replace(f.parameterGlobalRef,
function(a,b){return void 0!==b&&b?"options."+b:a}).replace(f.parameterHelperRef,function(a,b,d){return void 0!==d&&d?"Sqrl.Namespaces["+(void 0!==b&&b?'"'+b+'"':"currentHelperName")+"]."+d:a})+"]",id:k,firstblock:g,content:l});b=f.helper.lastIndex}a.length>b&&d.push({kind:"nonhelper",innerRefs:h(a.slice(b,a.length))});return d}(e);for(var k='var templateResult \x3d "";',p=0;p<e.length;++p){var g=e[p];if("helper"!==g.kind){g=g.innerRefs;for(var l=0;l<g.length;l++)if("globalRef"!==g[l].kind)for(var q=
g[l].innerRefs,n=0;n<q.length;n++)if("helperRef"!==q[n].kind){var t=q[n].value.trim();""!==t&&(k+='templateResult +\x3d "'+t+'";')}}}k=new Function("options",k+"return templateResult;");return{tagArray:e,func:k}};"undefined"!==typeof c&&null!==c&&(a.__express=function(e,h,r){c.readFile(e,function(c,e){if(c)return r(c);c=a.Compile(e.toString())(h);return r(null,c)})});return a});