!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.Sqrl=n():e.Sqrl=n()}("undefined"!=typeof self?self:this,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"__express",function(){return o}),t.d(r,"H",function(){return i}),t.d(r,"Compile",function(){return b}),t.d(r,"defineFilter",function(){return m}),t.d(r,"defineHelper",function(){return y}),t.d(r,"Render",function(){return w}),t.d(r,"F",function(){return f}),t.d(r,"setDefaultFilters",function(){return p}),t.d(r,"autoEscape",function(){return h}),t.d(r,"autoEscaping",function(){return v});var o=function(e,n,t){fs.readFile(e,function(e,r){if(e)return t(e);var o=r.toString(),i=Sqrl.Precompile(o),l=Sqrl.Render(i,n);return t(null,l)})},i={},l=/{{ *?(?:(?:(?:(?:([a-zA-Z_$][\w]* *?(?:[^\s\w\($][^\n]*)*?))|(?:@(?:([\w$]+:|(?:\.\.\/)+))? *(.+?) *))(?: *?(\| *?[\w$]+? *?)+?)?)|(?:([a-zA-Z_$][\w]*) *?\(([^\n]*)\) *?([\w]*))|(?:\/ *?([a-zA-Z_$][\w]*))|(?:# *?([a-zA-Z_$][\w]*))|(?:([a-zA-Z_$][\w]*) *?\(([^\n]*)\) *?\/)) *?}}/g,u=/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[\\]@(?:[\w$]*:)?[\w$]+|@(?:([\w$]*):)?([\w$]+)/g,a={start:"{{",end:"}}"};var s={if:{helperStart:function(e){return"if("+e+"){"},helperEnd:function(){return"}"},blocks:{else:function(){return"}else{"}}},each:{helperStart:function(e,n){return"for(var i=0;i<"+e+".length; i++){tmpltRes+=(function(hvals){var tmpltRes='';var hvals"+n+"=hvals;"},helperEnd:function(e){return"return tmpltRes})({this:"+e+"[i],index:i})};"}},foreach:{helperStart:function(e,n){return"for(var key in "+e+"){if(!"+e+".hasOwnProperty(key)) continue;tmpltRes+=(function(hvals){var tmpltRes='';var hvals"+n+"=hvals;"},helperEnd:function(e){return"return tmpltRes})({this:"+e+"[key], key: key})};"}},log:{selfClosing:function(e){return"console.log("+e+");"}},tags:{selfClosing:function(e){return""}}},f={d:function(e){return e},e:function(e){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};var t=String(e);return/[&<>"'\/]/.test(t)?t.replace(/[&<>"'\/]/g,function(e){return n[e]}):t}},c={},d={start:"",end:""};function p(e){if("clear"===e)c={};else for(var n in e)e.hasOwnProperty(n)&&(c[n]=e[n]);!function(){for(var e in d={start:"",end:""},c)c.hasOwnProperty(e)&&c[e]&&(d.start+="Sqrl.F."+e+"(",d.end+=")")}()}function v(e){h=!!e}var h=!0;function g(e,n){var t,r,o="",i="";if(n&&""!==n){t=n.split("|");for(var l=0;l<t.length;l++)t[l]=t[l].trim(),""!==t[l]&&("safe"!==t[l]?(o="Sqrl.F."+t[l]+"("+o,i+=")"):r=!0)}return o+=d.start,i+=d.end,!r&&h&&(o+="Sqrl.F.e(",i+=")"),o+e+i}function m(e,n){f[e]=n}function y(e,n){i[e]=n}var x={tags:a,regEx:l};function R(){!function(e){a=e}(x.tags),function(e){l=e}(x.regEx)}function w(e,n){return"function"==typeof e?e(n,r):"string"==typeof e?b(e)(n,r):void 0}function S(e){return e=e.replace(u,function(e,n,t){return void 0===t?e:(void 0===n&&(n=""),"hvals"+n+"."+t)})}var b=function(e){var n,t=0,r="",o=[],i=-1,u=0,f={};for(x={tags:a,regEx:l};null!==(n=l.exec(e));){if(n.index===l.lastIndex&&l.lastIndex++,""===r?r+="var tmpltRes='"+e.slice(t,n.index).replace(/'/g,"\\'")+"';":t!==n.index&&(r+="tmpltRes+='"+e.slice(t,n.index).replace(/'/g,"\\'")+"';"),t=n[0].length+n.index,n[1])r+="tmpltRes+="+b(n[1],n[4])+";";else if(n[3])r+="tmpltRes+="+_(n[3],n[2],n[4])+";";else if(n[5]){var c=n[7];""!==c&&null!==c||(c=u,u++);var d=s.hasOwnProperty(n[5]);i+=1,w=S(w=n[6]||""),d||(w="["+w+"]");var p={name:n[5],id:c,params:w,native:d};if(o[i]=p,d){var v=l.lastIndex;r+=s[n[5]].helperStart(w,c),l.lastIndex=t=v}else r+="tmpltRes+=Sqrl.H."+n[5]+"("+w+",function(hvals){var hvals"+c+"=hvals;"}else if(n[8]){var h=o[i];h&&h.name===n[8]?(i-=1,!0===h.native?r+=s[h.name].helperEnd(h.params,h.id):f[h.id]?r+="return tmpltRes}});":r+="return tmpltRes});"):console.error("Sorry, looks like your opening and closing tags don't match")}else if(n[9]){var m=o[i];if(m.native){var y=s[m.name];y.blocks&&y.blocks[n[9]]?(v=l.lastIndex,r+=y.blocks[n[9]](m.id),l.lastIndex=t=v):console.warn("Native helper '%s' doesn't accept that block.",m.name)}else f[m.id]?r+="return tmpltRes},"+n[9]+":function(hvals){var hvals"+m.id+"=hvals;var tmpltRes='';":(r+="return tmpltRes}, {"+n[9]+":function(hvals){var hvals"+m.id+"=hvals;var tmpltRes='';",f[m.id]=!0)}else if(n[10]){var w;w=S(w=n[11]||""),s.hasOwnProperty(n[10])&&s[n[10]].hasOwnProperty("selfClosing")?(v=l.lastIndex,r+=s[n[10]].selfClosing(w),l.lastIndex=t=v):r+="tmpltRes+=Sqrl.H."+n[10]+"("+w+");"}else console.error("Err: Code 000");function b(e,n){return g("options."+e,n)}function _(e,n,t){return g(void 0!==n?"hvals"+(/(?:\.\.\/)+/g.test(n)?o[i-n.length/3-1].id:n.slice(0,-1))+"."+e:"hvals."+e,t)}}return e.length>l.lastIndex&&(""===r?r+="var tmpltRes='"+e.slice(t,e.length).replace(/'/g,"\\'")+"';":t!==e.length&&(r+="tmpltRes+='"+e.slice(t,e.length).replace(/'/g,"\\'")+"';")),r+="return tmpltRes",R(),new Function("options","Sqrl",r.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))};t.d(n,"__express",function(){return o}),t.d(n,"H",function(){return i}),t.d(n,"Compile",function(){return b}),t.d(n,"defineFilter",function(){return m}),t.d(n,"defineHelper",function(){return y}),t.d(n,"Render",function(){return w}),t.d(n,"F",function(){return f}),t.d(n,"setDefaultFilters",function(){return p}),t.d(n,"autoEscape",function(){return h}),t.d(n,"autoEscaping",function(){return v})}])});
//# sourceMappingURL=squirrelly.min.js.map